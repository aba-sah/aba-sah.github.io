<html>
  <head>
  <!-- link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" / -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
     integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
     crossorigin=""/>

  </head>
  <body>
    <div id="map" style="width: 900px; height: 600px"></div>

    <!-- script src="http://code.jquery.com/jquery-2.1.0.min.js"></script -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
       integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
       crossorigin=""></script>
    <!-- script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script -->
    <!-- script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    
    <script>
      
      function onEachFeature(feature, layer) {
        if (feature.properties && feature.properties.title) {
          layer.bindPopup(feature.properties.title + "<br />" + feature.properties.description);
        }
      }

      
      //var map = L.map('map').setView([55.9967, -3.2655], 10);
      var map = L.map('map').setView([55.9761, -3.29465], 15);
      
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
          attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' + 
                          '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' + 
                          'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: 'mapbox/streets-v11',
          tileSize: 512,
          zoomOffset: -1,
          accessToken: 'pk.eyJ1IjoiYWJhLXNhaCIsImEiOiJja2Y0YzhidjgwNTc3MzBydnBwMGQ1NTllIn0.zeOI7q1hPCmH1xtttK_n0g'
      }).addTo(map);

      
      $.getJSON("may.geojson", function(response) {
        console.log("response", response);
        
        var geojsonLayer = L.geoJSON().addTo(map);
        geojsonLayer.addData(response);
         
        L.geoJSON(geojsonLayer, {
          console.log("in fn", geojsonLayer);

          pointToLayer: function (feature, latlng) {
            return L.marker(latlng, {icon: feature.properties.marker-symbol});
          },

          onEachFeature: onEachFeature
        }).addTo(map);
      
      });
      
    </script>
</body>
</html>
